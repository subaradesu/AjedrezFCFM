-- MySQL Script generated by MySQL Workbench
-- 10/24/15 02:26:03
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema ajedrezfcfm
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema ajedrezfcfm
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `ajedrezfcfm` DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ;
USE `ajedrezfcfm` ;

-- -----------------------------------------------------
-- Table `ajedrezfcfm`.`userStatus`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ajedrezfcfm`.`userStatus` ;

CREATE TABLE IF NOT EXISTS `ajedrezfcfm`.`userStatus` (
  `iduserStatus` INT NOT NULL COMMENT '',
  `name` VARCHAR(45) NOT NULL COMMENT '',
  PRIMARY KEY (`iduserStatus`)  COMMENT '')
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ajedrezfcfm`.`chessClub`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ajedrezfcfm`.`chessClub` ;

CREATE TABLE IF NOT EXISTS `ajedrezfcfm`.`chessClub` (
  `idchessClub` INT NOT NULL COMMENT '',
  `name` VARCHAR(45) NULL COMMENT '',
  `description` VARCHAR(255) NULL COMMENT '',
  `website` VARCHAR(45) NULL COMMENT '',
  PRIMARY KEY (`idchessClub`)  COMMENT '')
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ajedrezfcfm`.`chessPlayer`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ajedrezfcfm`.`chessPlayer` ;

CREATE TABLE IF NOT EXISTS `ajedrezfcfm`.`chessPlayer` (
  `idchessPlayer` INT NOT NULL COMMENT '',
  `chessPlayercol` VARCHAR(45) NULL COMMENT '',
  `playerName` VARCHAR(45) NULL COMMENT '',
  PRIMARY KEY (`idchessPlayer`)  COMMENT '')
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ajedrezfcfm`.`sex`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ajedrezfcfm`.`sex` ;

CREATE TABLE IF NOT EXISTS `ajedrezfcfm`.`sex` (
  `idtable1` CHAR(1) NOT NULL COMMENT '',
  `description` VARCHAR(45) NOT NULL COMMENT '',
  PRIMARY KEY (`idtable1`)  COMMENT '')
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ajedrezfcfm`.`user`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ajedrezfcfm`.`user` ;

CREATE TABLE IF NOT EXISTS `ajedrezfcfm`.`user` (
  `username` VARCHAR(30) NOT NULL COMMENT '',
  `password` VARCHAR(30) NOT NULL COMMENT '',
  `first_name` VARCHAR(50) NOT NULL COMMENT '',
  `last_name` VARCHAR(50) NOT NULL COMMENT '',
  `email` VARCHAR(100) NOT NULL COMMENT '',
  `sex` CHAR(1) NULL COMMENT '',
  `avatar` VARCHAR(100) NULL COMMENT '',
  `userStatus` INT NOT NULL COMMENT '',
  `chessClub_idchessClub` INT NULL COMMENT '',
  `chessPlayer_idchessPlayer` INT NULL COMMENT '',
  PRIMARY KEY (`username`)  COMMENT '',
  INDEX `fk_User_userStatus_idx` (`userStatus` ASC)  COMMENT '',
  INDEX `fk_user_chessClub1_idx` (`chessClub_idchessClub` ASC)  COMMENT '',
  INDEX `fk_user_chessPlayer1_idx` (`chessPlayer_idchessPlayer` ASC)  COMMENT '',
  INDEX `fk_user_sex1_idx` (`sex` ASC)  COMMENT '',
  CONSTRAINT `fk_User_userStatus`
    FOREIGN KEY (`userStatus`)
    REFERENCES `ajedrezfcfm`.`userStatus` (`iduserStatus`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_user_chessClub1`
    FOREIGN KEY (`chessClub_idchessClub`)
    REFERENCES `ajedrezfcfm`.`chessClub` (`idchessClub`)
    ON DELETE SET NULL
    ON UPDATE CASCADE,
  CONSTRAINT `fk_user_chessPlayer1`
    FOREIGN KEY (`chessPlayer_idchessPlayer`)
    REFERENCES `ajedrezfcfm`.`chessPlayer` (`idchessPlayer`)
    ON DELETE SET NULL
    ON UPDATE CASCADE,
  CONSTRAINT `fk_user_sex1`
    FOREIGN KEY (`sex`)
    REFERENCES `ajedrezfcfm`.`sex` (`idtable1`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ajedrezfcfm`.`publication`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ajedrezfcfm`.`publication` ;

CREATE TABLE IF NOT EXISTS `ajedrezfcfm`.`publication` (
  `idPublication` INT NOT NULL AUTO_INCREMENT COMMENT '',
  PRIMARY KEY (`idPublication`)  COMMENT '')
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ajedrezfcfm`.`comment`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ajedrezfcfm`.`comment` ;

CREATE TABLE IF NOT EXISTS `ajedrezfcfm`.`comment` (
  `idComment` INT NOT NULL COMMENT '',
  `commented_publication` INT NOT NULL COMMENT '',
  `content` VARCHAR(1000) NOT NULL COMMENT '',
  `date` DATE NOT NULL COMMENT '',
  PRIMARY KEY (`idComment`)  COMMENT '',
  INDEX `fk_comment_publication2_idx` (`commented_publication` ASC)  COMMENT '',
  CONSTRAINT `fk_comment_publication1`
    FOREIGN KEY (`idComment`)
    REFERENCES `ajedrezfcfm`.`publication` (`idPublication`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_comment_publication2`
    FOREIGN KEY (`commented_publication`)
    REFERENCES `ajedrezfcfm`.`publication` (`idPublication`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ajedrezfcfm`.`news`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ajedrezfcfm`.`news` ;

CREATE TABLE IF NOT EXISTS `ajedrezfcfm`.`news` (
  `idNew` INT NOT NULL COMMENT '',
  `title` VARCHAR(45) NOT NULL COMMENT '',
  `date` DATE NOT NULL COMMENT '',
  `content` VARCHAR(1000) NULL COMMENT '',
  `image_url` VARCHAR(45) NULL COMMENT '',
  `video_url` VARCHAR(45) NULL COMMENT '',
  `category` VARCHAR(45) NULL COMMENT '',
  PRIMARY KEY (`idNew`)  COMMENT '',
  INDEX `fk_news_publication1_idx` (`idNew` ASC)  COMMENT '',
  CONSTRAINT `fk_news_publication1`
    FOREIGN KEY (`idNew`)
    REFERENCES `ajedrezfcfm`.`publication` (`idPublication`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ajedrezfcfm`.`timestamps`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ajedrezfcfm`.`timestamps` ;

CREATE TABLE IF NOT EXISTS `ajedrezfcfm`.`timestamps` (
  `username` VARCHAR(30) NOT NULL COMMENT '',
  `update_time` DATE NULL COMMENT '',
  `create_time` DATE NULL COMMENT '',
  INDEX `fk_activity_User1_idx` (`username` ASC)  COMMENT '',
  PRIMARY KEY (`username`)  COMMENT '',
  CONSTRAINT `fk_activity_User1`
    FOREIGN KEY (`username`)
    REFERENCES `ajedrezfcfm`.`user` (`username`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ajedrezfcfm`.`chessPosition`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ajedrezfcfm`.`chessPosition` ;

CREATE TABLE IF NOT EXISTS `ajedrezfcfm`.`chessPosition` (
  `idchessPosition` INT NOT NULL COMMENT '',
  `pgn_filename` VARCHAR(50) NOT NULL COMMENT '',
  PRIMARY KEY (`idchessPosition`)  COMMENT '')
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ajedrezfcfm`.`annotatedGame`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ajedrezfcfm`.`annotatedGame` ;

CREATE TABLE IF NOT EXISTS `ajedrezfcfm`.`annotatedGame` (
  `idplayed` INT NOT NULL COMMENT '',
  `white_player` INT NOT NULL COMMENT '',
  `elo_white_game` INT NULL COMMENT '',
  `black_player` INT NOT NULL COMMENT '',
  `elo_black_game` INT NULL COMMENT '',
  `chessPosition_idchessPosition` INT NOT NULL COMMENT '',
  `location` VARCHAR(45) NULL COMMENT '',
  `date` DATE NULL COMMENT '',
  PRIMARY KEY (`idplayed`, `white_player`, `black_player`, `chessPosition_idchessPosition`)  COMMENT '',
  INDEX `fk_played_chessPlayer1_idx` (`white_player` ASC)  COMMENT '',
  INDEX `fk_played_chessPlayer2_idx` (`black_player` ASC)  COMMENT '',
  INDEX `fk_played_chessPosition1_idx` (`chessPosition_idchessPosition` ASC)  COMMENT '',
  CONSTRAINT `fk_played_chessPlayer1`
    FOREIGN KEY (`white_player`)
    REFERENCES `ajedrezfcfm`.`chessPlayer` (`idchessPlayer`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_played_chessPlayer2`
    FOREIGN KEY (`black_player`)
    REFERENCES `ajedrezfcfm`.`chessPlayer` (`idchessPlayer`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_played_chessPosition1`
    FOREIGN KEY (`chessPosition_idchessPosition`)
    REFERENCES `ajedrezfcfm`.`chessPosition` (`idchessPosition`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ajedrezfcfm`.`privateMessage`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ajedrezfcfm`.`privateMessage` ;

CREATE TABLE IF NOT EXISTS `ajedrezfcfm`.`privateMessage` (
  `idprivateMessage` INT NOT NULL COMMENT '',
  `content` VARCHAR(255) NOT NULL COMMENT '',
  `sender_username` VARCHAR(30) NOT NULL COMMENT '',
  `receiver_username` VARCHAR(30) NOT NULL COMMENT '',
  PRIMARY KEY (`idprivateMessage`)  COMMENT '',
  INDEX `fk_privateMessage_user1_idx` (`sender_username` ASC)  COMMENT '',
  INDEX `fk_privateMessage_user2_idx` (`receiver_username` ASC)  COMMENT '',
  CONSTRAINT `fk_privateMessage_user1`
    FOREIGN KEY (`sender_username`)
    REFERENCES `ajedrezfcfm`.`user` (`username`)
    ON DELETE NO ACTION
    ON UPDATE CASCADE,
  CONSTRAINT `fk_privateMessage_user2`
    FOREIGN KEY (`receiver_username`)
    REFERENCES `ajedrezfcfm`.`user` (`username`)
    ON DELETE NO ACTION
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ajedrezfcfm`.`publicationKarma`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ajedrezfcfm`.`publicationKarma` ;

CREATE TABLE IF NOT EXISTS `ajedrezfcfm`.`publicationKarma` (
  `publication_idPublication` INT NOT NULL COMMENT '',
  `user_username` VARCHAR(30) NOT NULL COMMENT '',
  `value` INT(11) NOT NULL COMMENT '',
  PRIMARY KEY (`publication_idPublication`, `user_username`)  COMMENT '',
  INDEX `fk_publicationKarma_user1_idx` (`user_username` ASC)  COMMENT '',
  CONSTRAINT `fk_publicationKarma_publication1`
    FOREIGN KEY (`publication_idPublication`)
    REFERENCES `ajedrezfcfm`.`publication` (`idPublication`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_publicationKarma_user1`
    FOREIGN KEY (`user_username`)
    REFERENCES `ajedrezfcfm`.`user` (`username`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ajedrezfcfm`.`event`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ajedrezfcfm`.`event` ;

CREATE TABLE IF NOT EXISTS `ajedrezfcfm`.`event` (
  `publication_idPublication` INT NOT NULL COMMENT '',
  `title` VARCHAR(45) NOT NULL COMMENT '',
  `description` VARCHAR(255) NOT NULL COMMENT '',
  `date` VARCHAR(45) NOT NULL COMMENT '',
  `time` VARCHAR(45) NOT NULL COMMENT '',
  `place` VARCHAR(45) NOT NULL COMMENT '',
  `visibility` VARCHAR(45) NOT NULL COMMENT '',
  PRIMARY KEY (`publication_idPublication`)  COMMENT '',
  INDEX `fk_event_publication1_idx` (`publication_idPublication` ASC)  COMMENT '',
  CONSTRAINT `fk_event_publication1`
    FOREIGN KEY (`publication_idPublication`)
    REFERENCES `ajedrezfcfm`.`publication` (`idPublication`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ajedrezfcfm`.`invitedList`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ajedrezfcfm`.`invitedList` ;

CREATE TABLE IF NOT EXISTS `ajedrezfcfm`.`invitedList` (
  `idevent` INT NOT NULL COMMENT '',
  `invited_username` VARCHAR(30) NOT NULL COMMENT '',
  `assistance` VARCHAR(45) NOT NULL COMMENT '',
  `show_notification` TINYINT(1) NOT NULL COMMENT '',
  INDEX `fk_invitedList_event1_idx` (`idevent` ASC)  COMMENT '',
  INDEX `fk_invitedList_user1_idx` (`invited_username` ASC)  COMMENT '',
  PRIMARY KEY (`idevent`, `invited_username`)  COMMENT '',
  CONSTRAINT `fk_invitedList_event1`
    FOREIGN KEY (`idevent`)
    REFERENCES `ajedrezfcfm`.`event` (`publication_idPublication`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_invitedList_user1`
    FOREIGN KEY (`invited_username`)
    REFERENCES `ajedrezfcfm`.`user` (`username`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ajedrezfcfm`.`gameReference`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ajedrezfcfm`.`gameReference` ;

CREATE TABLE IF NOT EXISTS `ajedrezfcfm`.`gameReference` (
  `chessPosition_idchessPosition` INT NOT NULL COMMENT '',
  `publication_idPublication` INT NOT NULL COMMENT '',
  PRIMARY KEY (`chessPosition_idchessPosition`, `publication_idPublication`)  COMMENT '',
  INDEX `fk_gameReference_publication1_idx` (`publication_idPublication` ASC)  COMMENT '',
  CONSTRAINT `fk_gameReference_chessPosition1`
    FOREIGN KEY (`chessPosition_idchessPosition`)
    REFERENCES `ajedrezfcfm`.`chessPosition` (`idchessPosition`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_gameReference_publication1`
    FOREIGN KEY (`publication_idPublication`)
    REFERENCES `ajedrezfcfm`.`publication` (`idPublication`)
    ON DELETE NO ACTION
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ajedrezfcfm`.`contentTag`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ajedrezfcfm`.`contentTag` ;

CREATE TABLE IF NOT EXISTS `ajedrezfcfm`.`contentTag` (
  `tag_name` VARCHAR(45) NOT NULL COMMENT '',
  `tag_description` VARCHAR(255) NOT NULL COMMENT '',
  PRIMARY KEY (`tag_name`)  COMMENT '')
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ajedrezfcfm`.`userTag`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ajedrezfcfm`.`userTag` ;

CREATE TABLE IF NOT EXISTS `ajedrezfcfm`.`userTag` (
  `publication_idPublication` INT NOT NULL COMMENT '',
  `user_username` VARCHAR(30) NOT NULL COMMENT '',
  `untagged` TINYINT(1) NULL COMMENT '',
  PRIMARY KEY (`publication_idPublication`, `user_username`)  COMMENT '',
  INDEX `fk_userTag_user1_idx` (`user_username` ASC)  COMMENT '',
  CONSTRAINT `fk_userTag_publication1`
    FOREIGN KEY (`publication_idPublication`)
    REFERENCES `ajedrezfcfm`.`publication` (`idPublication`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_userTag_user1`
    FOREIGN KEY (`user_username`)
    REFERENCES `ajedrezfcfm`.`user` (`username`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ajedrezfcfm`.`publicationTag`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ajedrezfcfm`.`publicationTag` ;

CREATE TABLE IF NOT EXISTS `ajedrezfcfm`.`publicationTag` (
  `idPublication` INT NOT NULL COMMENT '',
  `tag_name` VARCHAR(45) NOT NULL COMMENT '',
  PRIMARY KEY (`idPublication`, `tag_name`)  COMMENT '',
  INDEX `fk_publicationTag_contentTag1_idx` (`tag_name` ASC)  COMMENT '',
  CONSTRAINT `fk_publicationTag_publication1`
    FOREIGN KEY (`idPublication`)
    REFERENCES `ajedrezfcfm`.`publication` (`idPublication`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_publicationTag_contentTag1`
    FOREIGN KEY (`tag_name`)
    REFERENCES `ajedrezfcfm`.`contentTag` (`tag_name`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ajedrezfcfm`.`tournament`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ajedrezfcfm`.`tournament` ;

CREATE TABLE IF NOT EXISTS `ajedrezfcfm`.`tournament` (
  `idtournament` INT NOT NULL AUTO_INCREMENT COMMENT '',
  `tournament_filename` VARCHAR(45) NOT NULL COMMENT '',
  `date` DATE NULL COMMENT '',
  PRIMARY KEY (`idtournament`)  COMMENT '')
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ajedrezfcfm`.`tournamentRound`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ajedrezfcfm`.`tournamentRound` ;

CREATE TABLE IF NOT EXISTS `ajedrezfcfm`.`tournamentRound` (
  `idtournamentRound` INT NOT NULL COMMENT '',
  `tournament_idtournament` INT NOT NULL COMMENT '',
  PRIMARY KEY (`idtournamentRound`, `tournament_idtournament`)  COMMENT '',
  INDEX `fk_tournamentRound_tournament1_idx` (`tournament_idtournament` ASC)  COMMENT '',
  CONSTRAINT `fk_tournamentRound_tournament1`
    FOREIGN KEY (`tournament_idtournament`)
    REFERENCES `ajedrezfcfm`.`tournament` (`idtournament`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ajedrezfcfm`.`match`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ajedrezfcfm`.`match` ;

CREATE TABLE IF NOT EXISTS `ajedrezfcfm`.`match` (
  `idmatch` INT NOT NULL AUTO_INCREMENT COMMENT '',
  `white_player` INT NOT NULL COMMENT '',
  `black_player` INT NOT NULL COMMENT '',
  PRIMARY KEY (`idmatch`)  COMMENT '',
  INDEX `fk_match_chessPlayer1_idx` (`white_player` ASC)  COMMENT '',
  INDEX `fk_match_chessPlayer2_idx` (`black_player` ASC)  COMMENT '',
  CONSTRAINT `fk_match_chessPlayer1`
    FOREIGN KEY (`white_player`)
    REFERENCES `ajedrezfcfm`.`chessPlayer` (`idchessPlayer`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_match_chessPlayer2`
    FOREIGN KEY (`black_player`)
    REFERENCES `ajedrezfcfm`.`chessPlayer` (`idchessPlayer`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ajedrezfcfm`.`userPublication`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ajedrezfcfm`.`userPublication` ;

CREATE TABLE IF NOT EXISTS `ajedrezfcfm`.`userPublication` (
  `user_username` VARCHAR(30) NOT NULL COMMENT '',
  `publication_idPublication` INT NOT NULL COMMENT '',
  PRIMARY KEY (`user_username`, `publication_idPublication`)  COMMENT '',
  INDEX `fk_user_publication_publication1_idx` (`publication_idPublication` ASC)  COMMENT '',
  CONSTRAINT `fk_user_publication_user1`
    FOREIGN KEY (`user_username`)
    REFERENCES `ajedrezfcfm`.`user` (`username`)
    ON DELETE NO ACTION
    ON UPDATE CASCADE,
  CONSTRAINT `fk_user_publication_publication1`
    FOREIGN KEY (`publication_idPublication`)
    REFERENCES `ajedrezfcfm`.`publication` (`idPublication`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ajedrezfcfm`.`matchesPlayed`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ajedrezfcfm`.`matchesPlayed` ;

CREATE TABLE IF NOT EXISTS `ajedrezfcfm`.`matchesPlayed` (
  `idtournament` INT NOT NULL COMMENT '',
  `idtournamentRound` INT NOT NULL COMMENT '',
  `match_idmatch` INT NOT NULL COMMENT '',
  PRIMARY KEY (`idtournament`, `idtournamentRound`, `match_idmatch`)  COMMENT '',
  INDEX `fk_matchesPlayed_match1_idx` (`match_idmatch` ASC)  COMMENT '',
  CONSTRAINT `fk_matchesPlayed_tournamentRound1`
    FOREIGN KEY (`idtournamentRound` , `idtournament`)
    REFERENCES `ajedrezfcfm`.`tournamentRound` (`idtournamentRound` , `tournament_idtournament`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_matchesPlayed_match1`
    FOREIGN KEY (`match_idmatch`)
    REFERENCES `ajedrezfcfm`.`match` (`idmatch`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ajedrezfcfm`.`elo`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ajedrezfcfm`.`elo` ;

CREATE TABLE IF NOT EXISTS `ajedrezfcfm`.`elo` (
  `idchessPlayer` INT NOT NULL COMMENT '',
  `date` DATE NOT NULL COMMENT '',
  `elo` INT NOT NULL COMMENT '',
  `k` INT NOT NULL COMMENT '',
  PRIMARY KEY (`idchessPlayer`, `date`)  COMMENT '',
  INDEX `fk_elo_chessPlayer1_idx` (`idchessPlayer` ASC)  COMMENT '',
  CONSTRAINT `fk_elo_chessPlayer1`
    FOREIGN KEY (`idchessPlayer`)
    REFERENCES `ajedrezfcfm`.`chessPlayer` (`idchessPlayer`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `ajedrezfcfm`.`userStatus`
-- -----------------------------------------------------
START TRANSACTION;
USE `ajedrezfcfm`;
INSERT INTO `ajedrezfcfm`.`userStatus` (`iduserStatus`, `name`) VALUES (1, 'Usuario Activo');
INSERT INTO `ajedrezfcfm`.`userStatus` (`iduserStatus`, `name`) VALUES (2, 'Usuario Baneado');
INSERT INTO `ajedrezfcfm`.`userStatus` (`iduserStatus`, `name`) VALUES (3, 'Usuario Administrador');

COMMIT;


-- -----------------------------------------------------
-- Data for table `ajedrezfcfm`.`sex`
-- -----------------------------------------------------
START TRANSACTION;
USE `ajedrezfcfm`;
INSERT INTO `ajedrezfcfm`.`sex` (`idtable1`, `description`) VALUES ('0', 'Desconocido');
INSERT INTO `ajedrezfcfm`.`sex` (`idtable1`, `description`) VALUES ('1', 'Masculino');
INSERT INTO `ajedrezfcfm`.`sex` (`idtable1`, `description`) VALUES ('2', 'Femenino');
INSERT INTO `ajedrezfcfm`.`sex` (`idtable1`, `description`) VALUES ('9', 'No Aplica');

COMMIT;


-- -----------------------------------------------------
-- Data for table `ajedrezfcfm`.`user`
-- -----------------------------------------------------
START TRANSACTION;
USE `ajedrezfcfm`;
INSERT INTO `ajedrezfcfm`.`user` (`username`, `password`, `first_name`, `last_name`, `email`, `sex`, `avatar`, `userStatus`, `chessClub_idchessClub`, `chessPlayer_idchessPlayer`) VALUES ('user01', 'password', 'Hibiki', 'Tachibana', 'user01@XX.cl', '2', 'avatar0.jpg', 3, NULL, NULL);
INSERT INTO `ajedrezfcfm`.`user` (`username`, `password`, `first_name`, `last_name`, `email`, `sex`, `avatar`, `userStatus`, `chessClub_idchessClub`, `chessPlayer_idchessPlayer`) VALUES ('user02', 'password', 'Hikaru', 'Nakamura', 'user02@XX.cl', '1', 'avatar1.jpg', 1, NULL, NULL);
INSERT INTO `ajedrezfcfm`.`user` (`username`, `password`, `first_name`, `last_name`, `email`, `sex`, `avatar`, `userStatus`, `chessClub_idchessClub`, `chessPlayer_idchessPlayer`) VALUES ('user03', 'password', 'Magnus', 'Carlsen', 'user03@XX.cl', '1', 'avatar2.jpg', 1, NULL, NULL);
INSERT INTO `ajedrezfcfm`.`user` (`username`, `password`, `first_name`, `last_name`, `email`, `sex`, `avatar`, `userStatus`, `chessClub_idchessClub`, `chessPlayer_idchessPlayer`) VALUES ('user04', 'password', 'Maria', 'Cadenzavna', 'user04@XX.cl', '2', 'avatar3.jpg', 1, NULL, NULL);
INSERT INTO `ajedrezfcfm`.`user` (`username`, `password`, `first_name`, `last_name`, `email`, `sex`, `avatar`, `userStatus`, `chessClub_idchessClub`, `chessPlayer_idchessPlayer`) VALUES ('user05', 'password', 'Mauricio', 'Mu√±oz', 'user05@XX.cl', '1', 'avatar4.jpg', 1, NULL, NULL);
INSERT INTO `ajedrezfcfm`.`user` (`username`, `password`, `first_name`, `last_name`, `email`, `sex`, `avatar`, `userStatus`, `chessClub_idchessClub`, `chessPlayer_idchessPlayer`) VALUES ('user06', 'password', 'Gerald', 'Zeballos', 'user06@XX.cl', '0', 'avatar5.jpg', 1, NULL, NULL);
INSERT INTO `ajedrezfcfm`.`user` (`username`, `password`, `first_name`, `last_name`, `email`, `sex`, `avatar`, `userStatus`, `chessClub_idchessClub`, `chessPlayer_idchessPlayer`) VALUES ('user07', 'password', 'Juan', 'Perez', 'user07@XX.cl', '0', 'avatar6.jpg', 1, NULL, NULL);
INSERT INTO `ajedrezfcfm`.`user` (`username`, `password`, `first_name`, `last_name`, `email`, `sex`, `avatar`, `userStatus`, `chessClub_idchessClub`, `chessPlayer_idchessPlayer`) VALUES ('user08', 'password', 'Pablo', 'Pollo', 'user08@XX.cl', '1', 'avatar7.jpg', 1, NULL, NULL);
INSERT INTO `ajedrezfcfm`.`user` (`username`, `password`, `first_name`, `last_name`, `email`, `sex`, `avatar`, `userStatus`, `chessClub_idchessClub`, `chessPlayer_idchessPlayer`) VALUES ('user09', 'password', 'Chris', 'Yukine', 'user09@XX.cl', '2', 'avatar8.jpg', 1, NULL, NULL);
INSERT INTO `ajedrezfcfm`.`user` (`username`, `password`, `first_name`, `last_name`, `email`, `sex`, `avatar`, `userStatus`, `chessClub_idchessClub`, `chessPlayer_idchessPlayer`) VALUES ('user10', 'password', 'John', 'Titor', 'user10@XX.cl', '1', 'avatar9.jpg', 1, NULL, NULL);

COMMIT;

